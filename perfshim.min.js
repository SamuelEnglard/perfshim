window.perfshim=function(n){"use strict";function r(n){return new RegExp("(((\\w|])(\\[(\"|')"+n+"\\5\\]))|(\\w\\."+n+"))(\\(|\\.call\\(|\\.apply\\(|\\[(\"|')call\\8\\]\\(|\\[(\"|')apply\\9\\]\\()")}function f(n){f.firstScriptElement=f.firstScriptElement||document.getElementsByTagName("script")[0];var t=document.createElement("script");t.src=n;t.type="text/javascript";f.firstScriptElement.parentNode.insertBefore(t,f.firstScriptElement)}function e(n,t){var r,i,o;if(t[n.name]===undefined){for(r=n.dependencies(t),i=0;i<r.length;i++)o=u[r[i]],o.environmentNeeds()&&e(o,t);t[n.name]=!1;f(n.url)}}function o(n,t){for(var i in n)if(n.hasOwnProperty(i)&&n[i]===!1)return;t()}function s(){function c(n,t){for(var r=t.length,i=0;i<r;i++)if(n.scriptNeeds(t[i]))return!0;return!1}function l(){var e,c,r,l,o,s;for(e in n)u.hasOwnProperty(e)&&typeof n[e]=="function"&&n[e]();for(c=t.executeScripts.length,r=0;r<c;r++)t.attachScripts?f(t.executeScripts[r]):h(i.executeScripts[r]);for(l=t.callbacks.length,o=0;o<l;o++){s=t.callbacks[o];switch(typeof s){case"function":s();break;case"string":window[s]()}}t=null;i=null;u=null;window.perfshim=undefined}var n={},r,s;window.perfshim=function(t,i){n[t]=i;o(n,l)};for(r in u)u.hasOwnProperty(r)&&(s=u[r],s.environmentNeeds()&&(t.mustShims.indexOf(r)!==-1||t.neverShims.indexOf(r)===-1&&t.analyze&&c(s,i.executeScripts)&&c(s,i.noExecuteScripts))&&e(s,n));o(n,l)}function c(){function n(){var f=i.executeScripts.length,n,u,r;if(f===t.executeScripts.length){for(n=0;n<f;n++)if(typeof i.executeScripts[n]!="string")return;if(u=i.noExecuteScripts.length,u===t.noExecuteScripts.length){for(r=0;r<u;r++)if(typeof i.noExecuteScripts[r]!="string")return;s()}}}function r(r){function e(u){var o=t[r][u],e;o.type==="normal"?(e=new XMLHttpRequest,e.open("GET",o.url),e.onreadystatechange=function(){if(this.readyState===4){if(this.status!==200)throw new Error("Unable to download script");var t=this.getResponseHeader("Content-Type");if(t.indexOf("javascript")===-1)throw new Error("PerfShim was given a 'script' that is not a script");i[r][u]=this.responseText;n()}},e.send()):(f(o.url),window.perfshim=function(t){i[r][u]=t.toString();n()})}for(var o=t[r].length,u=0;u<o;u++)e(u)}t.executeScripts.length>0||t.noExecuteScripts.length>0?(r("executeScripts"),r("noExecuteScripts")):s()}function l(){function r(i){var f,r;if(n[i]!==undefined&&n[i]!==null)switch(typeof n[i]){case"string":t[i].push({url:n[i],type:"normal"});break;case"object":if(Array.isArray(n[i])){for(f=n[i].length,r=0;r<f;r++)if(typeof n[i][r]=="string")t[i].push({url:n[i][r],type:"normal"});else if(typeof n[i][r]!="object"||!u(n[i][r],t[i]))throw new Error("Invalid type in options."+i+" array.");}else if(!u(n[i],t[i]))throw new Error("options."+i+" was not a valid object");break;default:throw new Error("options."+i+" was not valid");}}function u(n,t){if(n.url===undefined||n.url===null||typeof n.url!="string"||n.type===undefined||n.type===null||typeof n.type!="string")return!1;switch(n.type){case"normal":return t.push({url:n.url,type:"normal"}),!0;case"json":return(window.typeOf===undefined&&(window.typeOf=function(n,t){t=t||!0;var i=typeof n;return i!=="object"?i:t&&n===null?"object":Object.prototype.toString.call(n).slice(8,-1).toLowerCase()}),n.method===undefined||n.method===null||!(typeof n.method=="string"||window.typeOf(n.method)==="regex"))?!1:(t.push({url:n.url,type:"json",method:n.method}),!0);default:return!1}}function f(i){var u,r;if(n[i]!==undefined&&n[i]!==null)if(typeof n[i]=="string")t[i].push(n[i]);else if(Array.isArray(n[i]))for(u=n[i].length,r=0;r<u;r++)if(typeof n[i][r]=="string")t[i].push(n[i][r]);else throw new Error("Invalid type in options."+i+" array.");else throw new Error("options."+i+" was not valid");}var e,i;if(n.callbacks!==undefined&&n.callbacks!==null)switch(typeof n.callbacks){case"string":case"function":t.callbacks.push(n.callbacks);break;default:if(Array.isArray(n.callbacks))for(e=n.callbacks.length,i=0;i<e;i++)switch(typeof n.callbacks[i]){case"string":case"function":t.callbacks.push(n.callbacks[i]);break;default:throw new Error("Invalid type in options.callback array.");}else throw new Error("options.callback was not valid");}r("executeScripts");r("noExecuteScripts");f("mustShims");f("neverShims");c()}function a(n,t){for(var f,i={},s=!1,h=n.length,r=0;r<h;r++)f=u[n[r]],f.environmentNeeds()&&(s=!0,e(f,i));s?window.perfshim=function(n,r){i[n]=r;o(i,function(){for(var n in i)i.hasOwnProperty(n)&&typeof i[n]=="function"&&i[n]();t()})}:t()}var h=window.execScript||eval,i={executeScripts:[],noExecuteScripts:[]},t={callbacks:[],executeScripts:[],noExecuteScripts:[],analyze:!0,mustShims:[],neverShims:[],attachScripts:!1},u={"Element-Prototype":{name:"Element-Prototype",url:"Scripts\\Element-Prototype.min.js",regex:/(?:\s|;|^|(?:window\.))Element\.prototype(?:(?:\.\w)|\[)/,scriptNeeds:function(n){return this.regex.test(n)},environmentNeeds:function(){return window.Element===undefined},dependencies:function(){return[]}},"HTMLElement-Prototype":{name:"HTMLElement-Prototype",url:"Scripts\\HTMLElement-Prototype.min.js",regex:/(?:\s|;|^|(?:window\.))HTMLElement\.prototype(?:(?:\.\w)|\[)/,scriptNeeds:function(n){return this.regex.test(n)},environmentNeeds:function(){return window.HTMLElement===undefined},dependencies:function(){return[]}},addEventListener:{name:"addEventListener",url:"Scripts\\addEventListener.min.js",regex:r("addEventListener"),scriptNeeds:function(n){return this.regex.test(n)},environmentNeeds:function(){return typeof document.createElement("div").addEventListener!="function"},dependencies:function(n){return n.hasOwnProperty("HTMLElement-Prototype")?["arrayIndexOf"]:["Element-Prototype","arrayIndexOf"]}},arrayIndexOf:{name:"arrayIndexOf",url:"Scripts\\arrayIndexOf.min.js",regex:r("indexOf"),scriptNeeds:function(n){return this.regex.test(n)},environmentNeeds:function(){return Array.prototype.indexOf===undefined},dependencies:function(){return[]}},xmlHttpRequest:{name:"xmlHttpRequest",url:"Scripts\\xmlHttpRequest.min.js",scriptNeeds:function(n){return n.indexOf("new XMLHttpRequest()")!==-1},environmentNeeds:function(){return window.XMLHttpRequest===undefined},dependencies:function(){return[]}},isArray:{name:"isArray",url:"Scripts\\isArray.min.js",regex:r("isArray"),scriptNeeds:function(n){return this.regex.test(n)},environmentNeeds:function(){return Array.isArray===undefined},dependencies:function(){return[]}},typeOf:{name:"typeOf",url:"Scripts\\typeOf.min.js",scriptNeeds:function(n){return n.indexOf("typeOf")!==-1},environmentNeeds:function(){return window.typeOf===undefined},dependencies:function(){return[]}},JSON:{name:"JSON",url:"Scripts\\json2.min.js",scriptNeeds:function(n){return n.indexOf("JSON.")!==-1},environmentNeeds:function(){return JSON===undefined},dependencies:function(){return[]}},canvas:{name:"canvas",url:"Scripts\\canvas.min.js",regex:r("getContext"),scriptNeeds:function(n){return this.regex.test(n)},environmentNeeds:function(){return document.createElement("canvas").getContext===undefined},dependencies:function(){return[]}},createElement:{name:"createElement",url:"Scripts\\createElement.min.js",environmentNeeds:function(){return!0},scriptNeeds:function(){return!1},dependencies:function(){return[]}},fromCodePoint:{name:"fromCodePoint",url:"Scripts\\fromCodePoint.min.js",regex:r("fromCodePoint"),environmentNeeds:function(){return String.fromCodePoint===undefined},scriptNeeds:function(n){return this.regex.test(n)},dependencies:function(){return[]}},codePointAt:{name:"codePointAt",url:"Scripts\\codePointAt.min.js",regex:r("codePointAt"),environmentNeeds:function(){return String.prototype.codePointAt===undefined},scriptNeeds:function(n){return this.regex.test(n)},dependencies:function(){return[]}},bind:{name:"bind",url:"Scripts\\bind.min.js",regex:r("bind"),evironmentNeeds:function(){return Function.prototype.bind===undefined},scriptNeeds:function(n){return this.regex.test(n)},dependencies:function(){return[]}},stringTrim:{name:"stringTrim",url:"Scripts\\stringTrim.min.js",regex:r("trim"),environmentNeeds:function(){return String.prototype.trim===undefined},scriptNeeds:function(n){return this.regex.test(n)},dependencies:function(){return[]}}};if(n===undefined||n===null)throw new Error("'userOptions' cannot be null or undefined");if(typeof n!="object")throw new Error("Argument must be an object.");n.analyze!==undefined&&n.analyze!==null&&typeof n.analyze=="boolean"&&(t.analyze=n.analyze);a(["xmlHttpRequest","arrayIndexOf","isArray"],l)};
/*
//# sourceMappingURL=perfshim.min.js.map
*/