window.perfshim=function(){"use strict";function r(){return r.element=r.element||document.getElementsByTagName("script")[0],r.element}function u(){return u.element=u.element||document.createElement("div"),u.element}function f(n,t){var o,u,s,e;if(t[n.name]===undefined){for(o=n.dependencies(t),u=0;u<o.length;u++)s=i[o[u]],s.environmentNeeds()&&f(s,t);t[n.name]=!1,e=document.createElement("script"),e.src=n.url,e.type="text/javascript",r().parentNode.insertBefore(e,r())}}function l(n){var t=document.createElement("script");return t.src=n,t.type="text/javascript",r().parentNode.insertBefore(t,r()),function(){t.parentNode.removeChild(t)}}function e(n,t){var i;for(i in n)if(n.hasOwnProperty(i)&&n[i]===!1)return;t()}function a(){var i,r,f,u;if(t.length===0)throw new Error("PerfShim requires at least one argument.");if(t.length===1&&typeof t[0]=="object")i=t[0],i.analyze!==undefined&&i.analyze!==null&&typeof i.analyze=="boolean"&&(n.analyze=i.analyze),o(["xmlHttpRequest","arrayIndexOf","isArray","typeOf"],v);else{for(r=0,typeof t[0]=="function"&&(n.callbacks.push(t[0]),r=1),f=t.length,u=r;u<f;u++)if(typeof t[u]!="string")throw new Error("All scripts must be strings");n.executeScripts=Array.prototype.slice.call(t,r),o(["xmlHttpRequest","arrayIndexOf","typeOf"],s)}}function o(n,t){for(var r={},s=!1,h=n.length,o,u=0;u<h;u++)o=i[n[u]],o.environmentNeeds()&&(s=!0,f(o,r));s?window.perfshim=function(n,i){r[n]=i,e(r,function(){for(var n in r)r.hasOwnProperty(n)&&typeof r[n]=="function"&&r[n]();t()})}:t()}function v(){function u(t){var u,r;if(i[t]!==undefined&&i[t]!==null)switch(typeof i[t]){case"string":n.push({url:i[t],type:"normal"});break;case"object":if(Array.isArray(i[t])){for(u=i[t].length,r=0;r<u;r++)if(typeof i[t][r]=="string")n[t].push({url:i[t][r],type:"normal"});else if(typeof i[t][r]!="object"||!f(i[t][r],n[t]))throw new Error("Invalid type in options."+t+" array.");}else if(!f(i[t],n[t]))throw new Error("options."+t+" was not a valid object");break;default:throw new Error("options."+t+" was not valid");}}function f(n,t){if(n.url===undefined||n.url===null||typeof n.url!="string"||n.type===undefined||n.type===null||typeof n.type!="string")return!1;switch(n.type){case"normal":return t.push({url:n.url,type:"normal"}),!0;case"json":return n.method===undefined||n.method===null||!(typeof n.method=="string"||window.typeOf(n.method)==="regex")?!1:(t.push({url:n.url,type:"json",method:n.method}),!0);default:return!1}}function e(t){var u,r;if(i[t]!==undefined&&i[t]!==null)if(typeof i[t]=="string")n[t].push(i[t]);else if(Array.isArray(i[t]))for(u=i[t].length,r=0;r<u;r++)if(typeof i[t][r]=="string")n[t].push(i[t][r]);else throw new Error("Invalid type in options."+t+" array.");else throw new Error("options."+t+" was not valid");}var i=t[0],o,r;if(i.callbacks!==undefined&&i.callbacks!==null)switch(typeof i.callbacks){case"string":case"function":n.callbacks.push(i.callbacks);break;default:if(Array.isArray(i.callbacks))for(o=i.callbacks.length,r=0;r<o;r++)switch(typeof i.callbacks[r]){case"string":case"function":n.callbacks.push(i.callbacks[r]);break;default:throw new Error("Invalid type in options.callback array.");}else throw new Error("options.callback was not valid");}u("executeScripts"),u("noExecuteScripts"),e("mustShims"),e("neverShims"),s()}function s(){function t(){for(var u=n.executeScripts.length,r,i,t=0;t<u;t++)if(typeof n.executeScripts[t]!="string")return;for(r=n.noExecuteScripts.length,i=0;i<r;i++)if(typeof n.noExecuteScripts[i]!="string")return;h()}function i(i){function u(r){var f=n[i][r],u;f.type==="normal"?(u=new XMLHttpRequest,u.open("GET",f.url),u.onreadystatechange=function(){if(this.readyState===4){if(this.status!==200)throw new Error("Unable to download script");var u=this.getResponseHeader("Content-Type");if(u.indexOf("javascript")===-1)throw new Error("PerfShim was given a 'script' that is not a script");n[i][r]=this.responseText,t()}},u.send()):(l(f.url),window.perfshim=function(u){n[i][r]=u.toString(),t()})}for(var f=n[i].length,r=0;r<f;r++)u(r)}n.executeScripts.length>0||n.noExecuteScripts.length>0?(i("executeScripts"),i("noExecuteScripts")):h()}function h(){function o(n,t){for(var r=t.length,i=0;i<r;i++)if(n.scriptNeeds(t[i]))return!0;return!1}function s(){var r,o,u,s,f,e;for(r in t)i.hasOwnProperty(r)&&typeof t[r]=="function"&&t[r]();for(o=n.executeScripts.length,u=0;u<o;u++)c(n.executeScripts[u]);for(s=n.callbacks.length,f=0;f<s;f++){e=n.callbacks[f];switch(typeof e){case"function":e();break;case"string":window[e]()}}}var t={},r,u;window.perfshim=function(n,i){t[n]=i,e(t,s)};for(r in i)i.hasOwnProperty(r)&&(u=i[r],u.environmentNeeds()&&(n.mustShims.indexOf(r)!==-1||n.neverShims.indexOf(r)===-1&&n.analyze&&o(u,n.executeScripts)&&o(u,n.noExecuteScripts))&&f(u,t));e(t,s)}var c=window.execScript||eval,n={callbacks:[],executeScripts:[],noExecuteScripts:[],analyze:!0,mustShims:[],neverShims:[]},i={"Element-Prototype":{name:"Element-Prototype",url:"Element-Prototype.min.js",regex:/(?:\s|;|^|(?:window\.))Element\.prototype(?:(?:\.\w)|\[)/,scriptNeeds:function(n){return this.regex.test(n)},environmentNeeds:function(){return window.Element===undefined},dependencies:function(){return[]}},"HTMLElement-Prototype":{name:"HTMLElement-Prototype",url:"HTMLElement-Prototype.min.js",regex:/(?:\s|;|^|(?:window\.))HTMLElement\.prototype(?:(?:\.\w)|\[)/,scriptNeeds:function(n){return this.regex.test(n)},environmentNeeds:function(){return window.HTMLElement===undefined},dependencies:function(){return[]}},addEventListener:{name:"addEventListener",url:"addEventListener.min.js",regex:new RegExp("(((\\w|])(\\[(\"|')addEventListener\\5\\]))|(\\w\\.addEventListener))(\\(|\\.call\\(|\\.apply\\(|\\[(\"|')call\\8\\]\\(|\\[(\"|')apply\\9\\]\\()"),scriptNeeds:function(n){return this.regex.test(n)},environmentNeeds:function(){return typeof u().addEventListener!="function"},dependencies:function(n){return n.hasOwnProperty("Element-Prototype")||n.hasOwnProperty("HTMLElement-Prototype")||!i["Element-Prototype"].environmentNeeds()||!i["HTMLElement-Prototype"].environmentNeeds()?["arrayIndexOf"]:["Element-Prototype","arrayIndexOf"]}},arrayIndexOf:{name:"arrayIndexOf",url:"arrayIndexOf.min.js",regex:new RegExp("(((\\w|])(\\[(\"|')indexOf\\5\\]))|(\\w\\.indexOf))(\\(|\\.call\\(|\\.apply\\(|\\[(\"|')call\\8\\]\\(|\\[(\"|')apply\\9\\]\\()"),scriptNeeds:function(n){return this.regex.test(n)},environmentNeeds:function(){return Array.prototype.indexOf===undefined},dependencies:function(){return[]}},xmlHttpRequest:{name:"xmlHttpRequest",url:"xmlHttpRequest.min.js",scriptNeeds:function(n){return n.indexOf("new XMLHttpRequest()")!==-1},environmentNeeds:function(){return window.XMLHttpRequest===undefined},dependencies:function(){return[]}},isArray:{name:"isArray",url:"isArray.min.js",scriptNeeds:function(n){return n.indexOf("Array.isArray")!==-1},environmentNeeds:function(){return Array.isArray===undefined},dependencies:function(){return[]}},typeOf:{name:"typeOf",url:"typeOf.min.js",scriptNeeds:function(n){return n.indexOf("typeOf")!==-1},environmentNeeds:function(){return!0},dependencies:function(){return[]}},JSON:{name:"JSON",url:"json2.min.js",scriptNeeds:function(n){return n.indexOf("JSON.")!==-1},environmentNeeds:function(){return JSON===undefined},dependencies:function(){return[]}},canvas:{name:"canvas",url:"canvas.min.js",scriptNeeds:function(n){return n.indexOf("getContext")!==-1},environmentNeeds:function(){return document.createElement("canvas").getContext===undefined},dependencies:function(){return[]}}},t=Array.prototype.slice.call(arguments,0);a()};
//@ sourceMappingURL=perfshim.min.js.map