window.perfshim=function(){"use strict";function r(n){r.firstScriptElement=r.firstScriptElement||document.getElementsByTagName("script")[0];var t=document.createElement("script");t.src=n;t.type="text/javascript";r.firstScriptElement.parentNode.insertBefore(t,r.firstScriptElement)}function f(n,t){var e,u,o;if(t[n.name]===undefined){for(e=n.dependencies(t),u=0;u<e.length;u++)o=i[e[u]],o.environmentNeeds()&&f(o,t);t[n.name]=!1;r(n.url)}}function e(n,t){for(var i in n)if(n.hasOwnProperty(i)&&n[i]===!1)return;t()}function o(){function c(n,t){for(var r=t.length,i=0;i<r;i++)if(n.scriptNeeds(t[i]))return!0;return!1}function l(){var e,c,f,l,o,h;for(e in u)i.hasOwnProperty(e)&&typeof u[e]=="function"&&u[e]();for(c=n.executeScripts.length,f=0;f<c;f++)n.attachScripts?r(n.executeScripts[f]):s(t.executeScripts[f]);for(l=n.callbacks.length,o=0;o<l;o++){h=n.callbacks[o];switch(typeof h){case"function":h();break;case"string":window[h]()}}}var u={},o,h;window.perfshim=function(n,t){u[n]=t;e(u,l)};for(o in i)i.hasOwnProperty(o)&&(h=i[o],h.environmentNeeds()&&(n.mustShims.indexOf(o)!==-1||n.neverShims.indexOf(o)===-1&&n.analyze&&c(h,t.executeScripts)&&c(h,t.noExecuteScripts))&&f(h,u));e(u,l)}function h(){function i(){var f=t.executeScripts.length,i,u,r;if(f===n.executeScripts.length){for(i=0;i<f;i++)if(typeof t.executeScripts[i]!="string")return;if(u=t.noExecuteScripts.length,u===n.noExecuteScripts.length){for(r=0;r<u;r++)if(typeof t.noExecuteScripts[r]!="string")return;o()}}}function u(u){function e(f){var o=n[u][f],e;o.type==="normal"?(e=new XMLHttpRequest,e.open("GET",o.url),e.onreadystatechange=function(){if(this.readyState===4){if(this.status!==200)throw new Error("Unable to download script");var n=this.getResponseHeader("Content-Type");if(n.indexOf("javascript")===-1)throw new Error("PerfShim was given a 'script' that is not a script");t[u][f]=this.responseText;i()}},e.send()):(r(o.url),window.perfshim=function(n){t[u][f]=n.toString();i()})}for(var o=n[u].length,f=0;f<o;f++)e(f)}n.executeScripts.length>0||n.noExecuteScripts.length>0?(u("executeScripts"),u("noExecuteScripts")):o()}function c(){function r(i){var u,r;if(t[i]!==undefined&&t[i]!==null)switch(typeof t[i]){case"string":n[i].push({url:t[i],type:"normal"});break;case"object":if(Array.isArray(t[i])){for(u=t[i].length,r=0;r<u;r++)if(typeof t[i][r]=="string")n[i].push({url:t[i][r],type:"normal"});else if(typeof t[i][r]!="object"||!f(t[i][r],n[i]))throw new Error("Invalid type in options."+i+" array.");}else if(!f(t[i],n[i]))throw new Error("options."+i+" was not a valid object");break;default:throw new Error("options."+i+" was not valid");}}function f(n,t){if(n.url===undefined||n.url===null||typeof n.url!="string"||n.type===undefined||n.type===null||typeof n.type!="string")return!1;switch(n.type){case"normal":return t.push({url:n.url,type:"normal"}),!0;case"json":return(window.typeOf===undefined&&(window.typeOf=function(n,t){t=t||!0;var i=typeof n;return i!=="object"?i:t&&n===null?"object":Object.prototype.toString.call(n).slice(8,-1).toLowerCase()}),n.method===undefined||n.method===null||!(typeof n.method=="string"||window.typeOf(n.method)==="regex"))?!1:(t.push({url:n.url,type:"json",method:n.method}),!0);default:return!1}}function e(i){var u,r;if(t[i]!==undefined&&t[i]!==null)if(typeof t[i]=="string")n[i].push(t[i]);else if(Array.isArray(t[i]))for(u=t[i].length,r=0;r<u;r++)if(typeof t[i][r]=="string")n[i].push(t[i][r]);else throw new Error("Invalid type in options."+i+" array.");else throw new Error("options."+i+" was not valid");}var t=u[0],o,i;if(t.callbacks!==undefined&&t.callbacks!==null)switch(typeof t.callbacks){case"string":case"function":n.callbacks.push(t.callbacks);break;default:if(Array.isArray(t.callbacks))for(o=t.callbacks.length,i=0;i<o;i++)switch(typeof t.callbacks[i]){case"string":case"function":n.callbacks.push(t.callbacks[i]);break;default:throw new Error("Invalid type in options.callback array.");}else throw new Error("options.callback was not valid");}r("executeScripts");r("noExecuteScripts");e("mustShims");e("neverShims");h()}function l(n,t){for(var o,r={},s=!1,h=n.length,u=0;u<h;u++)o=i[n[u]],o.environmentNeeds()&&(s=!0,f(o,r));s?window.perfshim=function(n,i){r[n]=i;e(r,function(){for(var n in r)r.hasOwnProperty(n)&&typeof r[n]=="function"&&r[n]();t()})}:t()}var s=window.execScript||eval,t={executeScripts:[],noExecuteScripts:[]},n={callbacks:[],executeScripts:[],noExecuteScripts:[],analyze:!0,mustShims:[],neverShims:[],attachScripts:!1},i={"Element-Prototype":{name:"Element-Prototype",url:"Scripts\\Element-Prototype.min.js",regex:/(?:\s|;|^|(?:window\.))Element\.prototype(?:(?:\.\w)|\[)/,scriptNeeds:function(n){return this.regex.test(n)},environmentNeeds:function(){return window.Element===undefined},dependencies:function(){return[]}},"HTMLElement-Prototype":{name:"HTMLElement-Prototype",url:"Scripts\\HTMLElement-Prototype.min.js",regex:/(?:\s|;|^|(?:window\.))HTMLElement\.prototype(?:(?:\.\w)|\[)/,scriptNeeds:function(n){return this.regex.test(n)},environmentNeeds:function(){return window.HTMLElement===undefined},dependencies:function(){return[]}},addEventListener:{name:"addEventListener",url:"Scripts\\addEventListener.min.js",regex:new RegExp("(((\\w|])(\\[(\"|')addEventListener\\5\\]))|(\\w\\.addEventListener))(\\(|\\.call\\(|\\.apply\\(|\\[(\"|')call\\8\\]\\(|\\[(\"|')apply\\9\\]\\()"),scriptNeeds:function(n){return this.regex.test(n)},environmentNeeds:function(){return typeof document.createElement("div").addEventListener!="function"},dependencies:function(n){return n.hasOwnProperty("Element-Prototype")||n.hasOwnProperty("HTMLElement-Prototype")||!i["Element-Prototype"].environmentNeeds()||!i["HTMLElement-Prototype"].environmentNeeds()?["arrayIndexOf"]:["Element-Prototype","arrayIndexOf"]}},arrayIndexOf:{name:"arrayIndexOf",url:"Scripts\\arrayIndexOf.min.js",regex:new RegExp("(((\\w|])(\\[(\"|')indexOf\\5\\]))|(\\w\\.indexOf))(\\(|\\.call\\(|\\.apply\\(|\\[(\"|')call\\8\\]\\(|\\[(\"|')apply\\9\\]\\()"),scriptNeeds:function(n){return this.regex.test(n)},environmentNeeds:function(){return Array.prototype.indexOf===undefined},dependencies:function(){return[]}},xmlHttpRequest:{name:"xmlHttpRequest",url:"Scripts\\xmlHttpRequest.min.js",scriptNeeds:function(n){return n.indexOf("new XMLHttpRequest()")!==-1},environmentNeeds:function(){return window.XMLHttpRequest===undefined},dependencies:function(){return[]}},isArray:{name:"isArray",url:"Scripts\\isArray.min.js",scriptNeeds:function(n){return n.indexOf("Array.isArray")!==-1},environmentNeeds:function(){return Array.isArray===undefined},dependencies:function(){return[]}},typeOf:{name:"typeOf",url:"Scripts\\typeOf.min.js",scriptNeeds:function(n){return n.indexOf("typeOf")!==-1},environmentNeeds:function(){return window.typeOf===undefined},dependencies:function(){return[]}},JSON:{name:"JSON",url:"Scripts\\json2.min.js",scriptNeeds:function(n){return n.indexOf("JSON.")!==-1},environmentNeeds:function(){return JSON===undefined},dependencies:function(){return[]}},canvas:{name:"canvas",url:"Scripts\\canvas.min.js",scriptNeeds:function(n){return n.indexOf("getContext")!==-1},environmentNeeds:function(){return document.createElement("canvas").getContext===undefined},dependencies:function(){return[]}},createElement:{name:"createElement",url:"Scripts\\createElement.min.js",environmentNeeds:function(){return!0},scriptNeeds:function(){return!1},dependencies:function(){return[]}}},u=Array.prototype.slice.call(arguments,0);(function(){if(u.length!==1)throw new Error("PerfShim requires one argument.");if(typeof u[0]!="object")throw new Error("Argument must be an object.");var t=u[0];t.analyze!==undefined&&t.analyze!==null&&typeof t.analyze=="boolean"&&(n.analyze=t.analyze);l(["xmlHttpRequest","arrayIndexOf","isArray"],c)})()};
/*
//# sourceMappingURL=perfshim.min.js.map
*/